import{a as W,b as X,c as Y,d as se}from"./chunk-IJWNHX5C.js";import{l as E,m as u,o as x,p as P,r as I,s as C,t as R,u as T,v as K,w as Q,x as A}from"./chunk-Y4ZKRO63.js";import{a as N}from"./chunk-BMBGSNUA.js";import"./chunk-CJ3CQDFZ.js";import{B as j,Da as c,P as q,Qa as d,Ra as n,Sa as i,Ta as v,Wb as y,_b as J,bb as S,db as w,e as ae,mc as k,nc as L,oa as s,pb as F,pc as H,rb as a,ta as g,xa as b,ya as G}from"./chunk-LGC44TO3.js";function me(t,o){t&1&&(n(0,"div"),a(1,"Email \xE9 obrigat\xF3rio"),i())}function de(t,o){t&1&&(n(0,"div"),a(1,"Email inv\xE1lido"),i())}function ue(t,o){t&1&&(n(0,"div"),a(1," Email n\xE3o pode ter mais de 30 caracteres "),i())}function pe(t,o){if(t&1&&(n(0,"div",19),c(1,me,2,0,"div",20)(2,de,2,0,"div",20)(3,ue,2,0,"div",20),i()),t&2){let r,e,l,m=w();s(),d("ngIf",(r=m.loginForm.get("email"))==null||r.errors==null?null:r.errors.required),s(),d("ngIf",(e=m.loginForm.get("email"))==null||e.errors==null?null:e.errors.email),s(),d("ngIf",(l=m.loginForm.get("email"))==null||l.errors==null?null:l.errors.maxlength)}}function ce(t,o){t&1&&(n(0,"div"),a(1,"Senha \xE9 obrigat\xF3ria"),i())}function ge(t,o){t&1&&(n(0,"div"),a(1,"Senha deve ter pelo menos 6 caracteres"),i())}function ve(t,o){t&1&&(n(0,"div"),a(1,"Senha n\xE3o pode ter mais de 30 caracteres"),i())}function fe(t,o){if(t&1&&(n(0,"div",19),c(1,ce,2,0,"div",20)(2,ge,2,0,"div",20)(3,ve,2,0,"div",20),i()),t&2){let r,e,l,m=w();s(),d("ngIf",(r=m.loginForm.get("password"))==null||r.errors==null?null:r.errors.required),s(),d("ngIf",(e=m.loginForm.get("password"))==null||e.errors==null?null:e.errors.minlength),s(),d("ngIf",(l=m.loginForm.get("password"))==null||l.errors==null?null:l.errors.maxlength)}}var O=class t{constructor(o,r,e,l){this.fb=o;this.authService=r;this.router=e;this.toastr=l}loginForm;showPassword=!1;ngOnInit(){this.initializeForm()}initializeForm(){this.loginForm=this.fb.group({email:["",[u.required,u.email,u.maxLength(30)]],password:["",[u.required,u.minLength(6),u.maxLength(30)]]})}logar(){if(!this.loginForm.valid){this.loginForm.markAllAsTouched(),Object.values(this.loginForm.controls).forEach(r=>{r.markAsDirty(),r.updateValueAndValidity()});return}let o={email:this.loginForm.value.email,password:this.loginForm.value.password};this.logarService(o)}logarService(o){this.authService.login(o).pipe(j(1)).subscribe({next:r=>{this.toastr.success(`Usu\xE1rio ${r.email} logado`,"Sucesso"),this.router.navigate(["/"])}})}togglePasswordVisibility(){this.showPassword=!this.showPassword}static \u0275fac=function(r){return new(r||t)(g(T),g(N),g(k),g(A))};static \u0275cmp=b({type:t,selectors:[["app-login"]],standalone:!1,decls:30,vars:16,consts:[[1,"d-flex","align-items-center","justify-content-center","vh-100","login-page"],["novalidate","",3,"formGroup"],[1,"text-center","mb-4"],["src","../../../assets/logo.svg","alt","Logo",2,"height","60px"],[1,"text-center","mb-1"],[1,"text-center"],[1,"mb-3"],["for","username",1,"form-label"],["id","username","type","text","formControlName","email","placeholder","Digite seu usu\xE1rio",1,"form-control"],[1,"valid-feedback"],["class","invalid-feedback",4,"ngIf"],["for","password",1,"form-label"],["id","password","formControlName","password","placeholder","Digite sua senha",1,"form-control",3,"type"],[1,"d-flex","mb-3"],["type","submit",1,"btn","btn-primary","flex-grow-1","me-2",3,"click"],["type","button",1,"btn","btn-outline-info","d-flex","justify-content-center","align-items-center",2,"flex-basis","10%",3,"click"],[1,"bi"],[1,"text-center","mt-3"],["routerLink","/register",1,"text-decoration-none"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(r,e){if(r&1&&(n(0,"div",0)(1,"form",1)(2,"h3",2),v(3,"img",3),i(),n(4,"h3",4),a(5,"Malharia Vit\xF3ria"),i(),n(6,"h4",5),a(7,"Login"),i(),n(8,"div",6)(9,"label",7),a(10,"Usu\xE1rio"),i(),v(11,"input",8),n(12,"div",9),a(13," Ok "),i(),c(14,pe,4,3,"div",10),i(),n(15,"div",6)(16,"label",11),a(17,"Senha"),i(),v(18,"input",12),n(19,"div",9),a(20,"Ok"),i(),c(21,fe,4,3,"div",10),i(),n(22,"div",13)(23,"button",14),S("click",function(){return e.logar()}),a(24," Entrar "),i(),n(25,"button",15),S("click",function(){return e.togglePasswordVisibility()}),v(26,"i",16),i()(),n(27,"div",17)(28,"a",18),a(29,"Criar conta"),i()()()()),r&2){let l,m,f,h,p,_;s(),d("formGroup",e.loginForm),s(10),F("is-valid",((l=e.loginForm.get("email"))==null?null:l.valid)&&((l=e.loginForm.get("email"))==null?null:l.touched))("is-invalid",((m=e.loginForm.get("email"))==null?null:m.invalid)&&((m=e.loginForm.get("email"))==null?null:m.touched)),s(3),d("ngIf",((f=e.loginForm.get("email"))==null?null:f.invalid)&&((f=e.loginForm.get("email"))==null?null:f.touched)),s(4),F("is-valid",((h=e.loginForm.get("password"))==null?null:h.valid)&&((h=e.loginForm.get("password"))==null?null:h.touched))("is-invalid",((p=e.loginForm.get("password"))==null?null:p.invalid)&&((p=e.loginForm.get("password"))==null?null:p.touched)),d("type",e.showPassword?"text":"password"),s(3),d("ngIf",((_=e.loginForm.get("password"))==null?null:_.invalid)&&((_=e.loginForm.get("password"))==null?null:_.touched)),s(5),F("bi-eye",!e.showPassword)("bi-eye-slash",e.showPassword)}},dependencies:[y,L,I,E,x,P,C,R],styles:[".login-page[_ngcontent-%COMP%]{height:100vh;background:var(--gradient-cerulean-lilas)!important;padding:1rem}"]})};function he(t,o){t&1&&(n(0,"div"),a(1,"Nome \xE9 obrigat\xF3rio"),i())}function _e(t,o){t&1&&(n(0,"div"),a(1," Nome deve ter pelo menos 2 caracteres "),i())}function Fe(t,o){t&1&&(n(0,"div"),a(1," Nome n\xE3o pode ter mais de 50 caracteres "),i())}function we(t,o){if(t&1&&(n(0,"div",16),c(1,he,2,0,"div",17)(2,_e,2,0,"div",17)(3,Fe,2,0,"div",17),i()),t&2){let r,e,l,m=w();s(),d("ngIf",(r=m.registerForm.get("nome"))==null||r.errors==null?null:r.errors.required),s(),d("ngIf",(e=m.registerForm.get("nome"))==null||e.errors==null?null:e.errors.minlength),s(),d("ngIf",(l=m.registerForm.get("nome"))==null||l.errors==null?null:l.errors.maxlength)}}function Se(t,o){t&1&&(n(0,"div"),a(1,"Email \xE9 obrigat\xF3rio"),i())}function be(t,o){t&1&&(n(0,"div"),a(1,"Email inv\xE1lido"),i())}function ye(t,o){t&1&&(n(0,"div"),a(1," Email n\xE3o pode ter mais de 30 caracteres "),i())}function Ee(t,o){if(t&1&&(n(0,"div",16),c(1,Se,2,0,"div",17)(2,be,2,0,"div",17)(3,ye,2,0,"div",17),i()),t&2){let r,e,l,m=w();s(),d("ngIf",(r=m.registerForm.get("email"))==null||r.errors==null?null:r.errors.required),s(),d("ngIf",(e=m.registerForm.get("email"))==null||e.errors==null?null:e.errors.email),s(),d("ngIf",(l=m.registerForm.get("email"))==null||l.errors==null?null:l.errors.maxlength)}}function xe(t,o){t&1&&(n(0,"div"),a(1,"Senha \xE9 obrigat\xF3ria"),i())}function Pe(t,o){t&1&&(n(0,"div"),a(1," Senha deve ter pelo menos 6 caracteres "),i())}function Ie(t,o){t&1&&(n(0,"div"),a(1," Senha n\xE3o pode ter mais de 30 caracteres "),i())}function Ce(t,o){if(t&1&&(n(0,"div",16),c(1,xe,2,0,"div",17)(2,Pe,2,0,"div",17)(3,Ie,2,0,"div",17),i()),t&2){let r,e,l,m=w();s(),d("ngIf",(r=m.registerForm.get("password"))==null||r.errors==null?null:r.errors.required),s(),d("ngIf",(e=m.registerForm.get("password"))==null||e.errors==null?null:e.errors.minlength),s(),d("ngIf",(l=m.registerForm.get("password"))==null||l.errors==null?null:l.errors.maxlength)}}var z=class t{constructor(o,r,e,l){this.fb=o;this.authService=r;this.router=e;this.toastr=l}registerForm;ngOnInit(){this.initializeForm()}initializeForm(){this.registerForm=this.fb.group({nome:["",[u.required,u.minLength(2),u.maxLength(50)]],email:["",[u.required,u.email,u.maxLength(30)]],password:["",[u.required,u.minLength(6),u.maxLength(30)]]})}register(){if(!this.registerForm.valid){this.registerForm.markAllAsTouched(),Object.values(this.registerForm.controls).forEach(r=>{r.markAsDirty(),r.updateValueAndValidity()});return}let o={email:this.registerForm.value.email,password:this.registerForm.value.password,nome:this.registerForm.value.nome};this.registrarService(o)}registrarService(o){this.authService.register(o).subscribe({next:r=>{this.toastr.success(r.message,"Sucesso"),this.router.navigate(["/login"])}})}static \u0275fac=function(r){return new(r||t)(g(T),g(N),g(k),g(A))};static \u0275cmp=b({type:t,selectors:[["app-register"]],standalone:!1,decls:34,vars:16,consts:[[1,"d-flex","align-items-center","justify-content-center","vh-100","register-page"],["novalidate","",3,"formGroup"],[1,"text-center","mb-4"],["src","../../../assets/logo.svg","alt","Logo",2,"height","60px"],[1,"text-center","mb-1"],[1,"mb-3"],["for","email",1,"form-label"],["id","nome","type","text","formControlName","nome","placeholder","Digite seu nome",1,"form-control"],[1,"valid-feedback"],["class","invalid-feedback",4,"ngIf"],["id","email","type","email","formControlName","email","placeholder","Digite seu email",1,"form-control"],["for","password",1,"form-label"],["id","password","type","password","formControlName","password","placeholder","Digite sua senha",1,"form-control"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-center","mt-3"],["routerLink","/login",1,"text-decoration-none"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(r,e){if(r&1&&(n(0,"div",0)(1,"form",1)(2,"h3",2),v(3,"img",3),i(),n(4,"h3",4),a(5,"Malharia Vit\xF3ria"),i(),n(6,"h4",2),a(7,"Cadastro"),i(),n(8,"div",5)(9,"label",6),a(10,"Nome"),i(),v(11,"input",7),n(12,"div",8),a(13,"Ok"),i(),c(14,we,4,3,"div",9),i(),n(15,"div",5)(16,"label",6),a(17,"Email"),i(),v(18,"input",10),n(19,"div",8),a(20,"Ok"),i(),c(21,Ee,4,3,"div",9),i(),n(22,"div",5)(23,"label",11),a(24,"Senha"),i(),v(25,"input",12),n(26,"div",8),a(27,"Ok"),i(),c(28,Ce,4,3,"div",9),i(),n(29,"button",13),S("click",function(){return e.register()}),a(30," Cadastrar "),i(),n(31,"div",14)(32,"a",15),a(33,"Login"),i()()()()),r&2){let l,m,f,h,p,_,M,D,V;s(),d("formGroup",e.registerForm),s(10),F("is-valid",((l=e.registerForm.get("nome"))==null?null:l.valid)&&((l=e.registerForm.get("nome"))==null?null:l.touched))("is-invalid",((m=e.registerForm.get("nome"))==null?null:m.invalid)&&((m=e.registerForm.get("nome"))==null?null:m.touched)),s(3),d("ngIf",((f=e.registerForm.get("nome"))==null?null:f.invalid)&&((f=e.registerForm.get("nome"))==null?null:f.touched)),s(4),F("is-valid",((h=e.registerForm.get("email"))==null?null:h.valid)&&((h=e.registerForm.get("email"))==null?null:h.touched))("is-invalid",((p=e.registerForm.get("email"))==null?null:p.invalid)&&((p=e.registerForm.get("email"))==null?null:p.touched)),s(3),d("ngIf",((_=e.registerForm.get("email"))==null?null:_.invalid)&&((_=e.registerForm.get("email"))==null?null:_.touched)),s(4),F("is-valid",((M=e.registerForm.get("password"))==null?null:M.valid)&&((M=e.registerForm.get("password"))==null?null:M.touched))("is-invalid",((D=e.registerForm.get("password"))==null?null:D.invalid)&&((D=e.registerForm.get("password"))==null?null:D.touched)),s(3),d("ngIf",((V=e.registerForm.get("password"))==null?null:V.invalid)&&((V=e.registerForm.get("password"))==null?null:V.touched))}},dependencies:[y,L,I,E,x,P,C,R],styles:[".register-page[_ngcontent-%COMP%]{height:100vh;background:var(--gradient-cerulean-lilas)!important;padding:1rem}"]})};function Re(t,o){t&1&&(n(0,"span"),a(1,"Senha obrigat\xF3ria."),i())}function Te(t,o){t&1&&(n(0,"span"),a(1,"Senha muito curta (m\xEDnimo 6 caracteres)."),i())}function ke(t,o){t&1&&(n(0,"span"),a(1,"Senha muito longa (m\xE1ximo 30 caracteres)."),i())}function Le(t,o){if(t&1&&(n(0,"div",17),c(1,Re,2,0,"span",18)(2,Te,2,0,"span",18)(3,ke,2,0,"span",18),i()),t&2){let r,e,l,m=w();s(),d("ngIf",(r=m.changeForm.get("password"))==null||r.errors==null?null:r.errors.required),s(),d("ngIf",(e=m.changeForm.get("password"))==null||e.errors==null?null:e.errors.minlength),s(),d("ngIf",(l=m.changeForm.get("password"))==null||l.errors==null?null:l.errors.maxlength)}}function Ne(t,o){t&1&&(n(0,"div",17),a(1," As senhas n\xE3o coincidem. "),i())}var U=class t{constructor(o,r,e,l){this.fb=o;this.authService=r;this.router=e;this.toastr=l}changeForm;showPassword=!1;ngOnInit(){this.initializeForm()}initializeForm(){this.changeForm=this.fb.group({password:["",[u.required,u.minLength(6),u.maxLength(30)]],confirmPassword:["",u.required]},{validators:this.passwordsMatchValidator})}passwordsMatchValidator(o){let r=o.get("password")?.value,e=o.get("confirmPassword")?.value;return o.get("confirmPassword")?.dirty?r===e?null:{passwordMismatch:!0}:null}alterar(){if(!this.changeForm.valid){this.changeForm.markAllAsTouched();return}let o={newPassword:this.changeForm.value.password};this.alterarService(o)}alterarService(o){this.authService.changePassword(o).pipe(j(1)).subscribe({next:r=>{this.toastr.success(r.message,"Sucesso"),localStorage.removeItem("token"),this.router.navigate(["/login"])}})}togglePasswordVisibility(){this.showPassword=!this.showPassword}static \u0275fac=function(r){return new(r||t)(g(T),g(N),g(k),g(A))};static \u0275cmp=b({type:t,selectors:[["app-change-password"]],standalone:!1,decls:26,vars:17,consts:[[1,"d-flex","align-items-center","justify-content-center","vh-100","change-password-page"],["novalidate","",3,"formGroup"],[1,"text-center","mb-4"],["src","../../../assets/logo.svg","alt","Logo",2,"height","60px"],[1,"text-center","mb-1"],[1,"mb-3"],["for","password",1,"form-label"],["id","password","formControlName","password","placeholder","Digite sua senha",1,"form-control",3,"type"],["class","invalid-feedback",4,"ngIf"],["for","confirmPassword",1,"form-label"],["id","confirmPassword","formControlName","confirmPassword","placeholder","Repita sua senha",1,"form-control",3,"type"],[1,"d-flex","mb-3"],["type","button",1,"btn","btn-primary","flex-grow-1","me-2",3,"click"],["type","button",1,"btn","btn-outline-info","d-flex","justify-content-center","align-items-center",2,"flex-basis","10%",3,"click"],[1,"bi"],[1,"text-center","mt-3"],["routerLink","/login",1,"text-decoration-none"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(r,e){if(r&1&&(n(0,"div",0)(1,"form",1)(2,"h3",2),v(3,"img",3),i(),n(4,"h3",4),a(5,"Malharia Vit\xF3ria"),i(),n(6,"h4",2),a(7,"Alterar Senha"),i(),n(8,"div",5)(9,"label",6),a(10,"Senha"),i(),v(11,"input",7),c(12,Le,4,3,"div",8),i(),n(13,"div",5)(14,"label",9),a(15,"Confirmar Senha"),i(),v(16,"input",10),c(17,Ne,2,0,"div",8),i(),n(18,"div",11)(19,"button",12),S("click",function(){return e.alterar()}),a(20," Alterar Senha "),i(),n(21,"button",13),S("click",function(){return e.togglePasswordVisibility()}),v(22,"i",14),i()(),n(23,"div",15)(24,"a",16),a(25,"Sair"),i()()()()),r&2){let l,m,f,h,p,_;s(),d("formGroup",e.changeForm),s(10),F("is-valid",((l=e.changeForm.get("password"))==null?null:l.valid)&&((l=e.changeForm.get("password"))==null?null:l.dirty))("is-invalid",((m=e.changeForm.get("password"))==null?null:m.invalid)&&((m=e.changeForm.get("password"))==null?null:m.dirty)),d("type",e.showPassword?"text":"password"),s(),d("ngIf",((f=e.changeForm.get("password"))==null?null:f.errors)&&((f=e.changeForm.get("password"))==null?null:f.dirty)),s(4),F("is-valid",((h=e.changeForm.get("confirmPassword"))==null?null:h.valid)&&((h=e.changeForm.get("confirmPassword"))==null?null:h.dirty)&&!(e.changeForm.errors!=null&&e.changeForm.errors.passwordMismatch))("is-invalid",((p=e.changeForm.get("confirmPassword"))==null?null:p.dirty)&&(e.changeForm.errors==null?null:e.changeForm.errors.passwordMismatch)||((p=e.changeForm.get("confirmPassword"))==null?null:p.invalid)&&((p=e.changeForm.get("confirmPassword"))==null?null:p.dirty)),d("type",e.showPassword?"text":"password"),s(),d("ngIf",(e.changeForm.errors==null?null:e.changeForm.errors.passwordMismatch)&&((_=e.changeForm.get("confirmPassword"))==null?null:_.dirty)),s(5),F("bi-eye",!e.showPassword)("bi-eye-slash",e.showPassword)}},dependencies:[y,L,I,E,x,P,C,R],styles:[".change-password-page[_ngcontent-%COMP%]{height:100vh;background:var(--gradient-cerulean-lilas)!important;padding:1rem}"]})};var Ae=[{path:"login",component:O},{path:"register",component:z},{path:"",redirectTo:"login",pathMatch:"full"},{path:"change-password",component:U,canActivate:[W]}],$=class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=G({type:t});static \u0275inj=q({imports:[H.forChild(Ae),H]})};var le=ae(se());var oe=class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=G({type:t});static \u0275inj=q({providers:[X({player:()=>le.default})],imports:[J,$,Q,K,Y]})};export{oe as AuthModule};
