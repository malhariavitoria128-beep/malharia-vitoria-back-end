import{a as Q,b as W,c as X,d as ae}from"./chunk-RG2PV7OL.js";import{l as b,m as u,o as y,p as I,r as C,s as R,t as T,u as N,v as J,w as K,x as A}from"./chunk-UO6DGOFM.js";import{a as k}from"./chunk-WW7LDCBC.js";import"./chunk-SUMQXGLR.js";import{Ca as c,O as j,Pa as d,Qa as n,Ra as i,Sa as h,Vb as x,Zb as H,ab as E,cb as S,e as le,lc as L,mc as P,na as m,ob as F,oc as $,qb as l,sa as g,wa as w,xa as V}from"./chunk-KBPPTWF2.js";function se(t,o){t&1&&(n(0,"div"),l(1,"Email \xE9 obrigat\xF3rio"),i())}function me(t,o){t&1&&(n(0,"div"),l(1,"Email inv\xE1lido"),i())}function de(t,o){t&1&&(n(0,"div"),l(1," Email n\xE3o pode ter mais de 30 caracteres "),i())}function ue(t,o){if(t&1&&(n(0,"div",16),c(1,se,2,0,"div",17)(2,me,2,0,"div",17)(3,de,2,0,"div",17),i()),t&2){let r,e,a,s=S();m(),d("ngIf",(r=s.loginForm.get("email"))==null||r.errors==null?null:r.errors.required),m(),d("ngIf",(e=s.loginForm.get("email"))==null||e.errors==null?null:e.errors.email),m(),d("ngIf",(a=s.loginForm.get("email"))==null||a.errors==null?null:a.errors.maxlength)}}function pe(t,o){t&1&&(n(0,"div"),l(1,"Senha \xE9 obrigat\xF3ria"),i())}function ce(t,o){t&1&&(n(0,"div"),l(1," Senha deve ter pelo menos 6 caracteres "),i())}function ge(t,o){t&1&&(n(0,"div"),l(1," Senha n\xE3o pode ter mais de 30 caracteres "),i())}function ve(t,o){if(t&1&&(n(0,"div",16),c(1,pe,2,0,"div",17)(2,ce,2,0,"div",17)(3,ge,2,0,"div",17),i()),t&2){let r,e,a,s=S();m(),d("ngIf",(r=s.loginForm.get("password"))==null||r.errors==null?null:r.errors.required),m(),d("ngIf",(e=s.loginForm.get("password"))==null||e.errors==null?null:e.errors.minlength),m(),d("ngIf",(a=s.loginForm.get("password"))==null||a.errors==null?null:a.errors.maxlength)}}var G=class t{constructor(o,r,e,a){this.fb=o;this.authService=r;this.router=e;this.toastr=a}loginForm;ngOnInit(){this.initializeForm()}initializeForm(){this.loginForm=this.fb.group({email:["",[u.required,u.email,u.maxLength(30)]],password:["",[u.required,u.minLength(6),u.maxLength(30)]]})}logar(){if(!this.loginForm.valid){this.loginForm.markAllAsTouched(),Object.values(this.loginForm.controls).forEach(r=>{r.markAsDirty(),r.updateValueAndValidity()});return}let o={email:this.loginForm.value.email,password:this.loginForm.value.password};this.logarService(o)}logarService(o){this.authService.login(o).subscribe({next:r=>{this.toastr.success(`Usu\xE1rio ${r.email} logado`,"Sucesso"),this.router.navigate(["/"])}})}static \u0275fac=function(r){return new(r||t)(g(N),g(k),g(L),g(A))};static \u0275cmp=w({type:t,selectors:[["app-login"]],standalone:!1,decls:27,vars:11,consts:[[1,"d-flex","align-items-center","justify-content-center","vh-100","login-page"],["novalidate","",3,"formGroup"],[1,"text-center","mb-4"],["src","../../../assets/logo.svg","alt","Logo",2,"height","60px"],[1,"text-center","mb-1"],[1,"text-center"],[1,"mb-3"],["for","username",1,"form-label"],["id","username","type","text","formControlName","email","placeholder","Digite seu usu\xE1rio",1,"form-control"],[1,"valid-feedback"],["class","invalid-feedback",4,"ngIf"],["for","password",1,"form-label"],["id","password","type","password","formControlName","password","placeholder","Digite sua senha",1,"form-control"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-center","mt-3"],["routerLink","/register",1,"text-decoration-none"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(r,e){if(r&1&&(n(0,"div",0)(1,"form",1)(2,"h3",2),h(3,"img",3),i(),n(4,"h3",4),l(5,"Malharia Vit\xF3ria"),i(),n(6,"h4",5),l(7,"Login"),i(),n(8,"div",6)(9,"label",7),l(10,"Usu\xE1rio"),i(),h(11,"input",8),n(12,"div",9),l(13," Ok "),i(),c(14,ue,4,3,"div",10),i(),n(15,"div",6)(16,"label",11),l(17,"Senha"),i(),h(18,"input",12),n(19,"div",9),l(20," Ok "),i(),c(21,ve,4,3,"div",10),i(),n(22,"button",13),E("click",function(){return e.logar()}),l(23," Entrar "),i(),n(24,"div",14)(25,"a",15),l(26,"Criar conta"),i()()()()),r&2){let a,s,v,f,p,_;m(),d("formGroup",e.loginForm),m(10),F("is-valid",((a=e.loginForm.get("email"))==null?null:a.valid)&&((a=e.loginForm.get("email"))==null?null:a.touched))("is-invalid",((s=e.loginForm.get("email"))==null?null:s.invalid)&&((s=e.loginForm.get("email"))==null?null:s.touched)),m(3),d("ngIf",((v=e.loginForm.get("email"))==null?null:v.invalid)&&((v=e.loginForm.get("email"))==null?null:v.touched)),m(4),F("is-valid",((f=e.loginForm.get("password"))==null?null:f.valid)&&((f=e.loginForm.get("password"))==null?null:f.touched))("is-invalid",((p=e.loginForm.get("password"))==null?null:p.invalid)&&((p=e.loginForm.get("password"))==null?null:p.touched)),m(3),d("ngIf",((_=e.loginForm.get("password"))==null?null:_.invalid)&&((_=e.loginForm.get("password"))==null?null:_.touched))}},dependencies:[x,P,C,b,y,I,R,T],styles:[".login-page[_ngcontent-%COMP%]{height:100vh;background:var(--gradient-cerulean-lilas)!important;padding:1rem}"]})};function fe(t,o){t&1&&(n(0,"div"),l(1,"Nome \xE9 obrigat\xF3rio"),i())}function he(t,o){t&1&&(n(0,"div"),l(1," Nome deve ter pelo menos 2 caracteres "),i())}function _e(t,o){t&1&&(n(0,"div"),l(1," Nome n\xE3o pode ter mais de 50 caracteres "),i())}function Fe(t,o){if(t&1&&(n(0,"div",16),c(1,fe,2,0,"div",17)(2,he,2,0,"div",17)(3,_e,2,0,"div",17),i()),t&2){let r,e,a,s=S();m(),d("ngIf",(r=s.registerForm.get("nome"))==null||r.errors==null?null:r.errors.required),m(),d("ngIf",(e=s.registerForm.get("nome"))==null||e.errors==null?null:e.errors.minlength),m(),d("ngIf",(a=s.registerForm.get("nome"))==null||a.errors==null?null:a.errors.maxlength)}}function Se(t,o){t&1&&(n(0,"div"),l(1,"Email \xE9 obrigat\xF3rio"),i())}function we(t,o){t&1&&(n(0,"div"),l(1,"Email inv\xE1lido"),i())}function Ee(t,o){t&1&&(n(0,"div"),l(1," Email n\xE3o pode ter mais de 30 caracteres "),i())}function xe(t,o){if(t&1&&(n(0,"div",16),c(1,Se,2,0,"div",17)(2,we,2,0,"div",17)(3,Ee,2,0,"div",17),i()),t&2){let r,e,a,s=S();m(),d("ngIf",(r=s.registerForm.get("email"))==null||r.errors==null?null:r.errors.required),m(),d("ngIf",(e=s.registerForm.get("email"))==null||e.errors==null?null:e.errors.email),m(),d("ngIf",(a=s.registerForm.get("email"))==null||a.errors==null?null:a.errors.maxlength)}}function be(t,o){t&1&&(n(0,"div"),l(1,"Senha \xE9 obrigat\xF3ria"),i())}function ye(t,o){t&1&&(n(0,"div"),l(1," Senha deve ter pelo menos 6 caracteres "),i())}function Ie(t,o){t&1&&(n(0,"div"),l(1," Senha n\xE3o pode ter mais de 30 caracteres "),i())}function Ce(t,o){if(t&1&&(n(0,"div",16),c(1,be,2,0,"div",17)(2,ye,2,0,"div",17)(3,Ie,2,0,"div",17),i()),t&2){let r,e,a,s=S();m(),d("ngIf",(r=s.registerForm.get("password"))==null||r.errors==null?null:r.errors.required),m(),d("ngIf",(e=s.registerForm.get("password"))==null||e.errors==null?null:e.errors.minlength),m(),d("ngIf",(a=s.registerForm.get("password"))==null||a.errors==null?null:a.errors.maxlength)}}var B=class t{constructor(o,r,e,a){this.fb=o;this.authService=r;this.router=e;this.toastr=a}registerForm;ngOnInit(){this.initializeForm()}initializeForm(){this.registerForm=this.fb.group({nome:["",[u.required,u.minLength(2),u.maxLength(50)]],email:["",[u.required,u.email,u.maxLength(30)]],password:["",[u.required,u.minLength(6),u.maxLength(30)]]})}register(){if(!this.registerForm.valid){this.registerForm.markAllAsTouched(),Object.values(this.registerForm.controls).forEach(r=>{r.markAsDirty(),r.updateValueAndValidity()});return}let o={email:this.registerForm.value.email,password:this.registerForm.value.password,nome:this.registerForm.value.nome};this.registrarService(o)}registrarService(o){this.authService.register(o).subscribe({next:r=>{this.toastr.success(r.message,"Sucesso"),this.router.navigate(["/login"])}})}static \u0275fac=function(r){return new(r||t)(g(N),g(k),g(L),g(A))};static \u0275cmp=w({type:t,selectors:[["app-register"]],standalone:!1,decls:34,vars:16,consts:[[1,"d-flex","align-items-center","justify-content-center","vh-100","register-page"],["novalidate","",3,"formGroup"],[1,"text-center","mb-4"],["src","../../../assets/logo.svg","alt","Logo",2,"height","60px"],[1,"text-center","mb-1"],[1,"mb-3"],["for","email",1,"form-label"],["id","nome","type","text","formControlName","nome","placeholder","Digite seu nome",1,"form-control"],[1,"valid-feedback"],["class","invalid-feedback",4,"ngIf"],["id","email","type","email","formControlName","email","placeholder","Digite seu email",1,"form-control"],["for","password",1,"form-label"],["id","password","type","password","formControlName","password","placeholder","Digite sua senha",1,"form-control"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-center","mt-3"],["routerLink","/login",1,"text-decoration-none"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(r,e){if(r&1&&(n(0,"div",0)(1,"form",1)(2,"h3",2),h(3,"img",3),i(),n(4,"h3",4),l(5,"Malharia Vit\xF3ria"),i(),n(6,"h4",2),l(7,"Cadastro"),i(),n(8,"div",5)(9,"label",6),l(10,"Nome"),i(),h(11,"input",7),n(12,"div",8),l(13,"Ok"),i(),c(14,Fe,4,3,"div",9),i(),n(15,"div",5)(16,"label",6),l(17,"Email"),i(),h(18,"input",10),n(19,"div",8),l(20,"Ok"),i(),c(21,xe,4,3,"div",9),i(),n(22,"div",5)(23,"label",11),l(24,"Senha"),i(),h(25,"input",12),n(26,"div",8),l(27,"Ok"),i(),c(28,Ce,4,3,"div",9),i(),n(29,"button",13),E("click",function(){return e.register()}),l(30," Cadastrar "),i(),n(31,"div",14)(32,"a",15),l(33,"Login"),i()()()()),r&2){let a,s,v,f,p,_,M,D,q;m(),d("formGroup",e.registerForm),m(10),F("is-valid",((a=e.registerForm.get("nome"))==null?null:a.valid)&&((a=e.registerForm.get("nome"))==null?null:a.touched))("is-invalid",((s=e.registerForm.get("nome"))==null?null:s.invalid)&&((s=e.registerForm.get("nome"))==null?null:s.touched)),m(3),d("ngIf",((v=e.registerForm.get("nome"))==null?null:v.invalid)&&((v=e.registerForm.get("nome"))==null?null:v.touched)),m(4),F("is-valid",((f=e.registerForm.get("email"))==null?null:f.valid)&&((f=e.registerForm.get("email"))==null?null:f.touched))("is-invalid",((p=e.registerForm.get("email"))==null?null:p.invalid)&&((p=e.registerForm.get("email"))==null?null:p.touched)),m(3),d("ngIf",((_=e.registerForm.get("email"))==null?null:_.invalid)&&((_=e.registerForm.get("email"))==null?null:_.touched)),m(4),F("is-valid",((M=e.registerForm.get("password"))==null?null:M.valid)&&((M=e.registerForm.get("password"))==null?null:M.touched))("is-invalid",((D=e.registerForm.get("password"))==null?null:D.invalid)&&((D=e.registerForm.get("password"))==null?null:D.touched)),m(3),d("ngIf",((q=e.registerForm.get("password"))==null?null:q.invalid)&&((q=e.registerForm.get("password"))==null?null:q.touched))}},dependencies:[x,P,C,b,y,I,R,T],styles:[".register-page[_ngcontent-%COMP%]{height:100vh;background:var(--gradient-cerulean-lilas)!important;padding:1rem}"]})};function Re(t,o){t&1&&(n(0,"span"),l(1,"Senha obrigat\xF3ria."),i())}function Te(t,o){t&1&&(n(0,"span"),l(1,"Senha muito curta (m\xEDnimo 6 caracteres)."),i())}function Ne(t,o){t&1&&(n(0,"span"),l(1,"Senha muito longa (m\xE1ximo 30 caracteres)."),i())}function Le(t,o){if(t&1&&(n(0,"div",14),c(1,Re,2,0,"span",15)(2,Te,2,0,"span",15)(3,Ne,2,0,"span",15),i()),t&2){let r,e,a,s=S();m(),d("ngIf",(r=s.changeForm.get("password"))==null||r.errors==null?null:r.errors.required),m(),d("ngIf",(e=s.changeForm.get("password"))==null||e.errors==null?null:e.errors.minlength),m(),d("ngIf",(a=s.changeForm.get("password"))==null||a.errors==null?null:a.errors.maxlength)}}function Pe(t,o){t&1&&(n(0,"div",14),l(1," As senhas n\xE3o coincidem. "),i())}var z=class t{constructor(o,r,e,a){this.fb=o;this.authService=r;this.router=e;this.toastr=a}changeForm;ngOnInit(){this.initializeForm()}initializeForm(){this.changeForm=this.fb.group({password:["",[u.required,u.minLength(6),u.maxLength(30)]],confirmPassword:["",u.required]},{validators:this.passwordsMatchValidator})}passwordsMatchValidator(o){let r=o.get("password")?.value,e=o.get("confirmPassword")?.value;return o.get("confirmPassword")?.dirty?r===e?null:{passwordMismatch:!0}:null}alterar(){if(!this.changeForm.valid){this.changeForm.markAllAsTouched();return}let o={newPassword:this.changeForm.value.password};this.alterarService(o)}alterarService(o){this.authService.changePassword(o).subscribe({next:r=>{this.toastr.success(r.message,"Sucesso"),localStorage.removeItem("token"),this.router.navigate(["/login"])}})}static \u0275fac=function(r){return new(r||t)(g(N),g(k),g(L),g(A))};static \u0275cmp=w({type:t,selectors:[["app-change-password"]],standalone:!1,decls:23,vars:11,consts:[[1,"d-flex","align-items-center","justify-content-center","vh-100","change-password-page"],["novalidate","",3,"formGroup"],[1,"text-center","mb-4"],["src","../../../assets/logo.svg","alt","Logo",2,"height","60px"],[1,"text-center","mb-1"],[1,"mb-3"],["for","password",1,"form-label"],["id","password","type","password","formControlName","password","placeholder","Digite sua senha",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","confirmPassword",1,"form-label"],["id","confirmPassword","type","password","formControlName","confirmPassword","placeholder","Repita sua senha",1,"form-control"],["type","button",1,"btn","btn-primary","w-100",3,"click"],[1,"text-center","mt-3"],["routerLink","/login",1,"text-decoration-none"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(r,e){if(r&1&&(n(0,"div",0)(1,"form",1)(2,"h3",2),h(3,"img",3),i(),n(4,"h3",4),l(5,"Malharia Vit\xF3ria"),i(),n(6,"h4",2),l(7,"Alterar Senha"),i(),n(8,"div",5)(9,"label",6),l(10,"Senha"),i(),h(11,"input",7),c(12,Le,4,3,"div",8),i(),n(13,"div",5)(14,"label",9),l(15,"Confirmar Senha"),i(),h(16,"input",10),c(17,Pe,2,0,"div",8),i(),n(18,"button",11),E("click",function(){return e.alterar()}),l(19," Alterar Senha "),i(),n(20,"div",12)(21,"a",13),l(22,"Sair"),i()()()()),r&2){let a,s,v,f,p,_;m(),d("formGroup",e.changeForm),m(10),F("is-valid",((a=e.changeForm.get("password"))==null?null:a.valid)&&((a=e.changeForm.get("password"))==null?null:a.dirty))("is-invalid",((s=e.changeForm.get("password"))==null?null:s.invalid)&&((s=e.changeForm.get("password"))==null?null:s.dirty)),m(),d("ngIf",((v=e.changeForm.get("password"))==null?null:v.errors)&&((v=e.changeForm.get("password"))==null?null:v.dirty)),m(4),F("is-valid",((f=e.changeForm.get("confirmPassword"))==null?null:f.valid)&&((f=e.changeForm.get("confirmPassword"))==null?null:f.dirty)&&!(e.changeForm.errors!=null&&e.changeForm.errors.passwordMismatch))("is-invalid",((p=e.changeForm.get("confirmPassword"))==null?null:p.dirty)&&(e.changeForm.errors==null?null:e.changeForm.errors.passwordMismatch)||((p=e.changeForm.get("confirmPassword"))==null?null:p.invalid)&&((p=e.changeForm.get("confirmPassword"))==null?null:p.dirty)),m(),d("ngIf",(e.changeForm.errors==null?null:e.changeForm.errors.passwordMismatch)&&((_=e.changeForm.get("confirmPassword"))==null?null:_.dirty))}},dependencies:[x,P,C,b,y,I,R,T],styles:[".change-password-page[_ngcontent-%COMP%]{height:100vh;background:var(--gradient-cerulean-lilas)!important;padding:1rem}"]})};var ke=[{path:"login",component:G},{path:"register",component:B},{path:"",redirectTo:"login",pathMatch:"full"},{path:"change-password",component:z,canActivate:[Q]}],U=class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=V({type:t});static \u0275inj=j({imports:[$.forChild(ke),$]})};var oe=le(ae());var ne=class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=V({type:t});static \u0275inj=j({providers:[W({player:()=>oe.default})],imports:[H,U,K,J,X]})};export{ne as AuthModule};
